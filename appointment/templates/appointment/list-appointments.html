{% extends 'base/base.html' %} {% load static %} {% block content %}

<div class="row wrapper border-bottom bg-white page-heading" style="margin-bottom: 30px;">
    <div class="col-lg-10">
        <h2 class="text-muted profile">Lista de consultas agendadas</h2>
    </div>
</div>
<div class="container">
    <form action="" method="GET">
    <div class="row">
        <td>
            <a class="fa fa-user-plus btn btn-info" href="{% url 'appointments:create-appointment'%}"
               style="margin-bottom: 10px;">
                Nova consulta</a>
        </td>

            <div class="form-group align-right col-md-auto mb-2">
                <label class="sr-only" for="search"></label>
                <input class="form-control" id="search" name="search" placeholder="Pesquisar consulta" type="text">
            </div>

            <button class="btn btn-primary mb-2" type="submit">Pesquisar</button>

    </div>
        </form>
</div>
<div class="table-responsive-md">
    <table class="table table-hover table-bordered">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Paciente</th>
            <th scope="col">N° Prontuário</th>
            <th scope="col">Medico</th>
            <th scope="col">Data da consulta</th>
            <th scope="col">Ações</th>
        </tr>
        </thead>
        {% for appointment in appointments %}
        <tbody>
        <th scope="row">{{ appointment.id }}</th>
        <td>
            <a class="text-muted" href="#"
               title="Visualizar mais detalhes">{{ appointment.pacient }}</a></td>
        <td>{{ appointment.pacient.medical_record_number }}</td>
        <td>{{ appointment.professional }}</td>
        <td>{{ appointment.date_appointment }}</td>

        <td>
            <a class="btn btn-info fa fa-edit"
               href="#" title="Editar consulta"></a>
        </td>
        </tbody>
        {% empty %}
        <div class="alert alert-warning" role="alert ">Nenhuma consulta cadastrada.</div>
        {% endfor %}
    </table>

</div>
{% if appointments.has_other_pages %}
<nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
        {% if appointments.has_previous %}
        <li class="page-item">
            <a aria-label="Previous" class="page-link" href="?page={{ appointments.previous_page_number }}">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
            </a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1">&laquo;</a>
        </li>
        {% endif %}
        {% for i in appointments.paginator.page_range %}
        {% if appointments.number == i %}
        <li class="page-item active">
            <a class="page-link" href="#">{{ i }} <span class="sr-only">(current)</span></a>
        </li>
        {% else %}
        <li><a href="?page={{ i }}">{{ i }}</a></li>
        {% endif %}
        {% endfor %}
        {% if appointments.has_next %}
        <li class="page-item">
            <a aria-label="Next" class="page-link" href="?page={{ appointments.next_page_number }}">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Next</span>
            </a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1">&raquo;</a>
        </li>
        {% endif %}
    </ul>
</nav>
{% endif %}
{% endblock %}